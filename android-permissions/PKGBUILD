_pkgname=android-permissions
pkgname=${_pkgname}-git
pkgver=4.19
pkgrel=1
pkgdesc="According to android_filesystem_config.h generate android.sysusers"
url=https://github.com/5kind/${_pkgname}
arch=('any')
license=('Apache-2.0')
source=("${_pkgname}::git+${url}")
sha256sums=('SKIP')

build() {
    cd "$srcdir/$_pkgname"
    bash android-permission-generator > "$_pkgname.sysusers"
}

package() {
    cd "$srcdir/$_pkgname"
    install -Dm644 android_filesystem_config.h "$pkgdir/usr/include/$_pkgname/android_filesystem_config.h"
    install -Dm644 "$_pkgname.sysusers" "$pkgdir/usr/lib/sysusers.d/$_pkgname.conf"
}
